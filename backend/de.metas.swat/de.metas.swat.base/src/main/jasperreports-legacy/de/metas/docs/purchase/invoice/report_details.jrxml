<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report_details" pageWidth="521" pageHeight="842" columnWidth="521" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" resourceBundle="de/metas/docs/purchase/invoice/report">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<parameter name="c_invoice_id" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[$P{c_invoice_id}]]></defaultValueExpression>
	</parameter>
	<parameter name="ad_language" class="java.lang.String">
		<defaultValueExpression><![CDATA[$P{ad_language}]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_DIR" class="java.lang.String">
		<defaultValueExpression><![CDATA["M:\\BusinessPartner\\\\ERP\\Jasper Reports\\Documents\\Sales\\Order\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="adempiere_reportline_sum" class="java.lang.String"/>
	<parameter name="adempiere_reportline_cond" class="java.lang.String"/>
	<queryString>
		<![CDATA[select * from
(
-- linetax_v
SELECT 	p.upc, il.ad_client_id, il.ad_org_id, i.c_doctype_id, il.isactive, il.created, il.createdby, il.updated, il.updatedby, 'de_DE' AS ad_language, il.c_invoice_id, il.c_invoiceline_id, il.c_tax_id, il.taxamt, il.linetotalamt, t.taxindicator, il.line, p.m_product_id,
        CASE
            WHEN il.qtyinvoiced <> 0::numeric OR il.m_product_id IS NOT NULL THEN il.qtyinvoiced
            ELSE NULL::numeric
        END AS qtyinvoiced,
        CASE
            WHEN il.qtyentered <> 0::numeric OR il.m_product_id IS NOT NULL THEN il.qtyentered
            ELSE NULL::numeric
        END AS qtyentered,
        CASE
            WHEN il.qtyentered <> 0::numeric OR il.m_product_id IS NOT NULL THEN uom.uomsymbol
            ELSE NULL::character varying
        END AS uomsymbol, COALESCE(c.name, (p.name::text || productattribute(il.m_attributesetinstance_id)::text)::character varying, il.description) AS name,
        CASE
            WHEN COALESCE(c.name, p.name) IS NOT NULL THEN il.description
            ELSE NULL::character varying
        END AS description, p.documentnote, p.upc, p.sku, COALESCE(pp.vendorproductno, p.value) AS productvalue, ra.description AS resourcedescription,
        CASE
            WHEN i.isdiscountprinted = 'Y'::bpchar AND il.pricelist <> 0::numeric THEN il.pricelist
            ELSE NULL::numeric
        END AS pricelist,
        CASE
            WHEN i.isdiscountprinted = 'Y'::bpchar AND il.pricelist <> 0::numeric AND il.qtyentered <> 0::numeric THEN il.pricelist * il.qtyinvoiced / il.qtyentered
            ELSE NULL::numeric
        END AS priceenteredlist,
        CASE
            WHEN i.isdiscountprinted = 'Y'::bpchar AND il.pricelist > il.priceactual AND il.pricelist <> 0::numeric THEN (il.pricelist - il.priceactual) / il.pricelist * 100::numeric
            ELSE NULL::numeric
        END AS discount,
        CASE
            WHEN il.priceactual <> 0::numeric OR il.m_product_id IS NOT NULL THEN il.priceactual
            ELSE NULL::numeric
        END AS priceactual,
        CASE
            WHEN il.priceentered <> 0::numeric OR il.m_product_id IS NOT NULL THEN il.priceentered
            ELSE NULL::numeric
        END AS priceentered,
        CASE
            WHEN il.linenetamt <> 0::numeric OR il.m_product_id IS NOT NULL THEN il.linenetamt
            ELSE NULL::numeric
        END AS linenetamt, il.m_attributesetinstance_id, asi.m_attributeset_id, p.description AS productdescription, p.imageurl, il.c_campaign_id, il.c_project_id, il.c_activity_id, il.c_projectphase_id, il.c_projecttask_id,
case
  when cur.cursymbol is null then cur.iso_code
  else cur.cursymbol
end as iso_code, round(t.rate) as taxrate, i.c_currency_id, round(ppr.pricelist, 2) as empf_price,

io.m_inout_id,
io.documentno 		as inout_docno,
io.movementdate 	as inout_date,
o.documentno 		as order_docno,
CASE WHEN o.poreference IS NULL THEN ' ' ELSE o.poreference end as order_poreference,
o.dateordered		as order_dateordered,

trim(
case when bp.name 	is null then ''	else bp.name || ' - '	end ||
case when bp.name2 	is null then ''	else bp.name2 || ', '	end ||
case when l.address1 	is null then ''	else l.address1 || ', '	end ||
case when l.address2 	is null then ''	else l.address2 || ', '	end ||
case when l.address3 	is null then ''	else l.address3 || ', '	end ||
case when l.address4 	is null then ''	else l.address4 || ', '	end ||
case when l.postal 	is null then ''	else l.postal		end ||
case when l.city 	is null then ''	else ' ' || l.city	end
) as bp_addressblock,
case
  when (il.m_product_id > 0 or il.c_charge_id > 0) and il.qtyinvoiced = 0 then 'DEL'
  else 'IL'
end as source

   FROM c_invoiceline il
   JOIN c_uom uom ON il.c_uom_id = uom.c_uom_id
   JOIN c_invoice i ON il.c_invoice_id = i.c_invoice_id
   LEFT JOIN c_orderline ol		ON il.c_orderline_id	= ol.c_orderline_id
   left JOIN c_order o			ON ol.c_order_id 	= o.c_order_id
   LEFT JOIN m_inoutline iol		ON il.m_inoutline_id	= iol.m_inoutline_id
   LEFT JOIN m_inout io			ON iol.m_inout_id	= io.m_inout_id
   LEFT JOIN c_tax t ON il.c_tax_id = t.c_tax_id
   LEFT JOIN m_product p ON il.m_product_id = p.m_product_id

--   LEFT JOIN c_uom tuom ON p.c_tuom_id = tuom.c_uom_id
   LEFT JOIN c_uom puom ON p.c_uom_id = puom.c_uom_id
   LEFT JOIN c_currency cur ON i.c_currency_id = cur.c_currency_id

   LEFT JOIN c_charge c ON il.c_charge_id = c.c_charge_id
   LEFT JOIN c_bpartner_product pp ON il.m_product_id = pp.m_product_id AND i.c_bpartner_id = pp.c_bpartner_id
   LEFT JOIN s_resourceassignment ra ON il.s_resourceassignment_id = ra.s_resourceassignment_id
   LEFT JOIN m_attributesetinstance asi ON il.m_attributesetinstance_id = asi.m_attributesetinstance_id
   LEFT JOIN m_inoutline minout ON il.m_inoutline_id = minout.m_inoutline_id
   LEFT JOIN m_locator mloc ON minout.m_locator_id = mloc.m_locator_id
   left join m_productprice ppr on p.m_product_id = ppr.m_product_id and ppr.m_pricelist_version_id = 1000006

   LEFT JOIN c_bpartner_location bpl	ON io.c_bpartner_location_id = bpl.c_bpartner_location_id
   LEFT JOIN c_location l		ON bpl.c_location_id = l.c_location_id
   LEFT JOIN c_bpartner	bp		ON io.c_bpartner_id = bp.c_bpartner_id
--   LEFT JOIN m_productorg porg ON (il.m_product_id = porg.m_product_id and il.ad_client_id = porg.ad_client_id and il.ad_org_id = porg.ad_org_id)

-----------------------------------------------------------
UNION
-----------------------------------------------------------

 SELECT p.upc, il.ad_client_id, il.ad_org_id, null,  il.isactive, il.created, il.createdby, il.updated, il.updatedby, 'de_DE' AS ad_language, il.c_invoice_id, il.c_invoiceline_id, il.c_tax_id, il.taxamt, il.linetotalamt, t.taxindicator, il.line + b.line / 100::numeric AS line, p.m_product_id, il.qtyinvoiced * b.bomqty AS qtyinvoiced, il.qtyentered * b.bomqty AS qtyentered, uom.uomsymbol, p.name, b.description, p.documentnote, p.upc, p.sku, p.value AS productvalue, NULL::"unknown" AS resourcedescription, NULL::"unknown" AS pricelist, NULL::"unknown" AS priceenteredlist, NULL::"unknown" AS discount, NULL::"unknown" AS priceactual, NULL::"unknown" AS priceentered, NULL::"unknown" AS linenetamt, il.m_attributesetinstance_id, asi.m_attributeset_id, p.description AS productdescription, p.imageurl, il.c_campaign_id, il.c_project_id, il.c_activity_id, il.c_projectphase_id, il.c_projecttask_id,
null, null, null, null,
null, null, null, null, null, null, null,
'BO' as source
   FROM m_product_bom b
   JOIN c_invoiceline il ON b.m_product_id = il.m_product_id
   JOIN m_product bp ON bp.m_product_id = il.m_product_id AND bp.isbom = 'Y'::bpchar AND bp.isverified = 'Y'::bpchar AND bp.isinvoiceprintdetails = 'Y'::bpchar
   JOIN m_product p ON b.m_productbom_id = p.m_product_id
   JOIN c_uom uom ON p.c_uom_id = uom.c_uom_id
   LEFT JOIN c_tax t ON il.c_tax_id = t.c_tax_id
   LEFT JOIN m_attributesetinstance asi ON il.m_attributesetinstance_id = asi.m_attributesetinstance_id

-----------------------------------------------------------
UNION
-----------------------------------------------------------

 SELECT NULL::"unknown" AS upc, c_invoice.ad_client_id, c_invoice.ad_org_id, c_invoice.c_doctype_id, c_invoice.isactive, c_invoice.created, c_invoice.createdby, c_invoice.updated, c_invoice.updatedby, 'de_DE' AS ad_language, c_invoice.c_invoice_id, NULL::"unknown" AS c_invoiceline_id, NULL::"unknown" AS c_tax_id, NULL::"unknown" AS taxamt, NULL::"unknown" AS linetotalamt, NULL::"unknown" AS taxindicator, 9998 AS line, NULL::"unknown" AS m_product_id, NULL::"unknown" AS qtyinvoiced, NULL::"unknown" AS qtyentered, NULL::"unknown" AS uomsymbol, NULL::"unknown" AS name, NULL::"unknown" AS description, NULL::"unknown" AS documentnote, NULL::"unknown" AS upc, NULL::"unknown" AS sku, NULL::"unknown" AS productvalue, NULL::"unknown" AS resourcedescription, NULL::"unknown" AS pricelist, NULL::"unknown" AS priceenteredlist, NULL::"unknown" AS discount, NULL::"unknown" AS priceactual, NULL::"unknown" AS priceentered, NULL::"unknown" AS linenetamt, NULL::"unknown" AS m_attributesetinstance_id, NULL::"unknown" AS m_attributeset_id, NULL::"unknown" AS productdescription, NULL::"unknown" AS imageurl, NULL::"unknown" AS c_campaign_id, NULL::"unknown" AS c_project_id, NULL::"unknown" AS c_activity_id, NULL::"unknown" AS c_projectphase_id, NULL::"unknown" AS c_projecttask_id,
case
  when cur.cursymbol is null then cur.iso_code
  else cur.cursymbol
end as iso_code, null, c_invoice.c_currency_id, null,
null, null, null, null, null, null, null,
'OR' as source
   FROM c_invoice
   left join c_currency cur on c_invoice.c_currency_id = cur.c_currency_id

-----------------------------------------------------------
UNION
-----------------------------------------------------------

 SELECT NULL::"unknown" AS upc, it.ad_client_id, it.ad_org_id, i.c_doctype_id, it.isactive, it.created, it.createdby, it.updated, it.updatedby, 'de_DE' AS ad_language, it.c_invoice_id, NULL::"unknown" AS c_invoiceline_id, it.c_tax_id, NULL::"unknown" AS taxamt, NULL::"unknown" AS linetotalamt, t.taxindicator, 9999 AS line, NULL::"unknown" AS m_product_id, NULL::"unknown" AS qtyinvoiced, NULL::"unknown" AS qtyentered, NULL::"unknown" AS uomsymbol, t.name, NULL::"unknown" AS description, NULL::"unknown" AS documentnote, NULL::"unknown" AS upc, NULL::"unknown" AS sku, NULL::"unknown" AS productvalue, NULL::"unknown" AS resourcedescription, NULL::"unknown" AS pricelist, NULL::"unknown" AS priceenteredlist, NULL::"unknown" AS discount,
        CASE
            WHEN it.istaxincluded = 'Y'::bpchar THEN it.taxamt
            ELSE it.taxbaseamt
        END AS priceactual,
        CASE
            WHEN it.istaxincluded = 'Y'::bpchar THEN it.taxamt
            ELSE it.taxbaseamt
        END AS priceentered,
        CASE
            WHEN it.istaxincluded = 'Y'::bpchar THEN NULL::numeric
            ELSE it.taxamt
        END AS linenetamt, NULL::"unknown" AS m_attributesetinstance_id, NULL::"unknown" AS m_attributeset_id, NULL::"unknown" AS productdescription, NULL::"unknown" AS imageurl, NULL::"unknown" AS c_campaign_id, NULL::"unknown" AS c_project_id, NULL::"unknown" AS c_activity_id, NULL::"unknown" AS c_projectphase_id, NULL::"unknown" AS c_projecttask_id,
case
  when cur.cursymbol is null then cur.iso_code
  else cur.cursymbol
end as iso_code, null, i.c_currency_id,null,
null, null, null, null, null, null, null,
'TX' as source
   FROM c_invoicetax it
   JOIN c_tax t ON it.c_tax_id = t.c_tax_id
   JOIN c_invoice i ON it.c_invoice_id = i.c_invoice_id
   LEFT JOIN c_currency cur ON i.c_currency_id = cur.c_currency_id

-----------------------------------------------------------
UNION
-----------------------------------------------------------

-- linetax_vt
 SELECT p.upc, il.ad_client_id, il.ad_org_id,  i.c_doctype_id, il.isactive, il.created, il.createdby, il.updated, il.updatedby, uom.ad_language, il.c_invoice_id, il.c_invoiceline_id, il.c_tax_id, il.taxamt, il.linetotalamt, t.taxindicator, il.line, p.m_product_id,
        CASE
            WHEN il.qtyinvoiced <> 0::numeric OR il.m_product_id IS NOT NULL THEN il.qtyinvoiced
            ELSE NULL::numeric
        END AS qtyinvoiced,
        CASE
            WHEN il.qtyentered <> 0::numeric OR il.m_product_id IS NOT NULL THEN il.qtyentered
            ELSE NULL::numeric
        END AS qtyentered,
        CASE
            WHEN il.qtyentered <> 0::numeric OR il.m_product_id IS NOT NULL THEN uom.uomsymbol
            ELSE NULL::character varying
        END AS uomsymbol, COALESCE(c.name, (COALESCE(pt.name, p.name)::text || productattribute(il.m_attributesetinstance_id)::text)::character varying, il.description) AS name,
        CASE
            WHEN COALESCE(c.name, pt.name, p.name) IS NOT NULL THEN il.description
            ELSE NULL::character varying
        END AS description, COALESCE(pt.documentnote, p.documentnote) AS documentnote, p.upc, p.sku, COALESCE(pp.vendorproductno, p.value) AS productvalue, ra.description AS resourcedescription,
        CASE
            WHEN i.isdiscountprinted = 'Y'::bpchar AND il.pricelist <> 0::numeric THEN il.pricelist
            ELSE NULL::numeric
        END AS pricelist,
        CASE
            WHEN i.isdiscountprinted = 'Y'::bpchar AND il.pricelist <> 0::numeric AND il.qtyentered <> 0::numeric THEN il.pricelist * il.qtyinvoiced / il.qtyentered
            ELSE NULL::numeric
        END AS priceenteredlist,
        CASE
            WHEN i.isdiscountprinted = 'Y'::bpchar AND il.pricelist > il.priceactual AND il.pricelist <> 0::numeric THEN (il.pricelist - il.priceactual) / il.pricelist * 100::numeric
            ELSE NULL::numeric
        END AS discount,
        CASE
            WHEN il.priceactual <> 0::numeric OR il.m_product_id IS NOT NULL THEN il.priceactual
            ELSE NULL::numeric
        END AS priceactual,
        CASE
            WHEN il.priceentered <> 0::numeric OR il.m_product_id IS NOT NULL THEN il.priceentered
            ELSE NULL::numeric
        END AS priceentered,
        CASE
            WHEN il.linenetamt <> 0::numeric OR il.m_product_id IS NOT NULL THEN il.linenetamt
            ELSE NULL::numeric
        END AS linenetamt, il.m_attributesetinstance_id, asi.m_attributeset_id, pt.description AS productdescription, p.imageurl, il.c_campaign_id, il.c_project_id, il.c_activity_id, il.c_projectphase_id, il.c_projecttask_id,
case
  when cur.cursymbol is null then cur.iso_code
  else cur.cursymbol
end as iso_code, round(t0.rate) as taxrate,
i.c_currency_id, round(ppr.pricelist, 2) as empf_price,

io.m_inout_id,
io.documentno 		as inout_docno,
io.movementdate 	as inout_date,
o.documentno 		as order_docno,
CASE WHEN o.poreference IS NULL THEN ' ' ELSE o.poreference end as order_poreference,
o.dateordered		as order_dateordered,

trim(
case when bp.name 	is null then ''	else bp.name || ' - '	end ||
case when bp.name2 	is null then ''	else bp.name2 || ', '	end ||
case when l.address1 	is null then ''	else l.address1 || ', '	end ||
case when l.address2 	is null then ''	else l.address2 || ', '	end ||
case when l.address3 	is null then ''	else l.address3 || ', '	end ||
case when l.address4 	is null then ''	else l.address4 || ', '	end ||
case when l.postal 	is null then ''	else l.postal		end ||
case when l.city 	is null then ''	else ' ' || l.city	end
) as bp_addressblock,
case
  when (il.m_product_id > 0 or il.c_charge_id > 0) and il.qtyinvoiced = 0 then 'DEL'
  else 'IL'
end as source

   FROM c_invoiceline il
   JOIN c_uom_trl uom ON il.c_uom_id = uom.c_uom_id
   JOIN c_invoice i ON il.c_invoice_id = i.c_invoice_id
   LEFT JOIN c_orderline ol		ON il.c_orderline_id	= ol.c_orderline_id
   left JOIN c_order o			ON ol.c_order_id 	= o.c_order_id
   LEFT JOIN m_inoutline iol		ON il.m_inoutline_id	= iol.m_inoutline_id
   LEFT JOIN m_inout io			ON iol.m_inout_id	= io.m_inout_id
   LEFT JOIN c_tax t0 ON il.c_tax_id = t0.c_tax_id
   LEFT JOIN c_tax_trl t ON il.c_tax_id = t.c_tax_id AND uom.ad_language::text = t.ad_language::text
   LEFT JOIN m_product p ON il.m_product_id = p.m_product_id

-- LEFT JOIN c_uom_trl tuom ON p.c_tuom_id = tuom.c_uom_id AND uom.ad_language::text = tuom.ad_language::text
   LEFT JOIN c_uom_trl puom ON p.c_uom_id = puom.c_uom_id AND uom.ad_language::text = puom.ad_language::text
   LEFT JOIN c_currency cur ON i.c_currency_id = cur.c_currency_id

   LEFT JOIN c_charge c ON il.c_charge_id = c.c_charge_id
   LEFT JOIN c_bpartner_product pp ON il.m_product_id = pp.m_product_id AND i.c_bpartner_id = pp.c_bpartner_id
   LEFT JOIN m_product_trl pt ON il.m_product_id = pt.m_product_id AND uom.ad_language::text = pt.ad_language::text
   LEFT JOIN s_resourceassignment ra ON il.s_resourceassignment_id = ra.s_resourceassignment_id
   LEFT JOIN m_attributesetinstance asi ON il.m_attributesetinstance_id = asi.m_attributesetinstance_id
   LEFT JOIN m_inoutline minout ON il.m_inoutline_id = minout.m_inoutline_id
   LEFT JOIN m_locator mloc ON minout.m_locator_id = mloc.m_locator_id
   left join m_productprice ppr on p.m_product_id = ppr.m_product_id and ppr.m_pricelist_version_id = 1000006

   LEFT JOIN c_bpartner_location bpl	ON io.c_bpartner_location_id = bpl.c_bpartner_location_id
   LEFT JOIN c_location l		ON bpl.c_location_id = l.c_location_id
   LEFT JOIN c_bpartner	bp		ON io.c_bpartner_id = bp.c_bpartner_id
--   LEFT JOIN m_productorg porg ON (il.m_product_id = porg.m_product_id and il.ad_client_id = porg.ad_client_id and il.ad_org_id = porg.ad_org_id)

-----------------------------------------------------------
UNION
-----------------------------------------------------------

 SELECT p.upc, il.ad_client_id, il.ad_org_id, null, il.isactive, il.created, il.createdby, il.updated, il.updatedby, uom.ad_language, il.c_invoice_id, il.c_invoiceline_id, il.c_tax_id, il.taxamt, il.linetotalamt, t.taxindicator, il.line + b.line / 100::numeric AS line, p.m_product_id, il.qtyinvoiced * b.bomqty AS qtyinvoiced, il.qtyentered * b.bomqty AS qtyentered, uom.uomsymbol, COALESCE(pt.name, p.name) AS name, b.description, COALESCE(pt.documentnote, p.documentnote) AS documentnote, p.upc, p.sku, p.value AS productvalue, NULL::"unknown" AS resourcedescription, NULL::"unknown" AS pricelist, NULL::"unknown" AS priceenteredlist, NULL::"unknown" AS discount, NULL::"unknown" AS priceactual, NULL::"unknown" AS priceentered, NULL::"unknown" AS linenetamt, il.m_attributesetinstance_id, asi.m_attributeset_id, pt.description AS productdescription, p.imageurl, il.c_campaign_id, il.c_project_id, il.c_activity_id, il.c_projectphase_id, il.c_projecttask_id,
null, null, null, null,
null, null, null, null, null, null, null,
'BO' as source
   FROM m_product_bom b
   JOIN c_invoiceline il ON b.m_product_id = il.m_product_id
   JOIN m_product bp ON bp.m_product_id = il.m_product_id AND bp.isbom = 'Y'::bpchar AND bp.isverified = 'Y'::bpchar AND bp.isinvoiceprintdetails = 'Y'::bpchar
   JOIN m_product p ON b.m_productbom_id = p.m_product_id
   JOIN c_uom_trl uom ON p.c_uom_id = uom.c_uom_id
   JOIN m_product_trl pt ON b.m_productbom_id = pt.m_product_id AND uom.ad_language::text = pt.ad_language::text
   LEFT JOIN c_tax t ON il.c_tax_id = t.c_tax_id
   LEFT JOIN m_attributesetinstance asi ON il.m_attributesetinstance_id = asi.m_attributesetinstance_id

-----------------------------------------------------------
UNION
-----------------------------------------------------------

 SELECT NULL::"unknown" AS upc, i.ad_client_id, i.ad_org_id, i.c_doctype_id, i.isactive, i.created, i.createdby, i.updated, i.updatedby, l.ad_language, i.c_invoice_id, NULL::"unknown" AS c_invoiceline_id, NULL::"unknown" AS c_tax_id, NULL::"unknown" AS taxamt, NULL::"unknown" AS linetotalamt, NULL::"unknown" AS taxindicator, 9998 AS line, NULL::"unknown" AS m_product_id, NULL::"unknown" AS qtyinvoiced, NULL::"unknown" AS qtyentered, NULL::"unknown" AS uomsymbol, NULL::"unknown" AS name, NULL::"unknown" AS description, NULL::"unknown" AS documentnote, NULL::"unknown" AS upc, NULL::"unknown" AS sku, NULL::"unknown" AS productvalue, NULL::"unknown" AS resourcedescription, NULL::"unknown" AS pricelist, NULL::"unknown" AS priceenteredlist, NULL::"unknown" AS discount, NULL::"unknown" AS priceactual, NULL::"unknown" AS priceentered, NULL::"unknown" AS linenetamt, NULL::"unknown" AS m_attributesetinstance_id, NULL::"unknown" AS m_attributeset_id, NULL::"unknown" AS productdescription, NULL::"unknown" AS imageurl, NULL::"unknown" AS c_campaign_id, NULL::"unknown" AS c_project_id, NULL::"unknown" AS c_activity_id, NULL::"unknown" AS c_projectphase_id, NULL::"unknown" AS c_projecttask_id,
case
  when cur.cursymbol is null then cur.iso_code
  else cur.cursymbol
end as iso_code, null, i.c_currency_id, null,
null, null, null, null, null, null, null,
'IN' as source
   FROM c_invoice i
   left join c_currency cur on i.c_currency_id = cur.c_currency_id
   left join c_currency_trl ctrl on cur.c_currency_id = ctrl.c_currency_id
   left join ad_language l on ctrl.ad_language= l.ad_language
  WHERE l.isbaselanguage = 'N'::bpchar AND l.issystemlanguage = 'Y'::bpchar

-----------------------------------------------------------
UNION
-----------------------------------------------------------

 SELECT NULL::"unknown" AS upc, it.ad_client_id, it.ad_org_id, i.c_doctype_id, it.isactive, it.created, it.createdby, it.updated, it.updatedby, t.ad_language, it.c_invoice_id, NULL::"unknown" AS c_invoiceline_id, it.c_tax_id, NULL::"unknown" AS taxamt, NULL::"unknown" AS linetotalamt, t.taxindicator, 9999 AS line, NULL::"unknown" AS m_product_id, NULL::"unknown" AS qtyinvoiced, NULL::"unknown" AS qtyentered, NULL::"unknown" AS uomsymbol, t.name, NULL::"unknown" AS description, NULL::"unknown" AS documentnote, NULL::"unknown" AS upc, NULL::"unknown" AS sku, NULL::"unknown" AS productvalue, NULL::"unknown" AS resourcedescription, NULL::"unknown" AS pricelist, NULL::"unknown" AS priceenteredlist, NULL::"unknown" AS discount,
        CASE
            WHEN it.istaxincluded = 'Y'::bpchar THEN it.taxamt
            ELSE it.taxbaseamt
        END AS priceactual,
        CASE
            WHEN it.istaxincluded = 'Y'::bpchar THEN it.taxamt
            ELSE it.taxbaseamt
        END AS priceentered,
        CASE
            WHEN it.istaxincluded = 'Y'::bpchar THEN NULL::numeric
            ELSE it.taxamt
        END AS linenetamt, NULL::"unknown" AS m_attributesetinstance_id, NULL::"unknown" AS m_attributeset_id, NULL::"unknown" AS productdescription, NULL::"unknown" AS imageurl, NULL::"unknown" AS c_campaign_id, NULL::"unknown" AS c_project_id, NULL::"unknown" AS c_activity_id, NULL::"unknown" AS c_projectphase_id, NULL::"unknown" AS c_projecttask_id,
case
  when cur.cursymbol is null then cur.iso_code
  else cur.cursymbol
end as iso_code, null, i.c_currency_id, null,
null, null, null, null, null, null, null,
'TX' as source
   FROM c_invoicetax it
   JOIN c_tax_trl t ON it.c_tax_id = t.c_tax_id
   JOIN c_invoice i ON it.c_invoice_id = i.c_invoice_id
   LEFT JOIN c_currency cur ON i.c_currency_id = cur.c_currency_id
) as invoiceline
where invoiceline.c_invoice_id = $P{c_invoice_id} and invoiceline.ad_language = $P{ad_language}
and invoiceline.ad_language = 'de_DE'
and (invoiceline.line > 0 and invoiceline.name <> '')
and invoiceline.source <>'TX' --and invoiceline.source <>'DEL'
order by invoiceline.line
;]]>
	</queryString>
	<field name="upc" class="java.lang.String"/>
	<field name="ad_client_id" class="java.math.BigDecimal"/>
	<field name="ad_org_id" class="java.math.BigDecimal"/>
	<field name="c_doctype_id" class="java.math.BigDecimal"/>
	<field name="isactive" class="java.lang.String"/>
	<field name="created" class="java.sql.Timestamp"/>
	<field name="createdby" class="java.math.BigDecimal"/>
	<field name="updated" class="java.sql.Timestamp"/>
	<field name="updatedby" class="java.math.BigDecimal"/>
	<field name="ad_language" class="java.lang.String"/>
	<field name="c_invoice_id" class="java.math.BigDecimal"/>
	<field name="c_invoiceline_id" class="java.math.BigDecimal"/>
	<field name="c_tax_id" class="java.math.BigDecimal"/>
	<field name="taxamt" class="java.math.BigDecimal"/>
	<field name="linetotalamt" class="java.math.BigDecimal"/>
	<field name="taxindicator" class="java.lang.String"/>
	<field name="line" class="java.math.BigDecimal"/>
	<field name="m_product_id" class="java.math.BigDecimal"/>
	<field name="qtyinvoiced" class="java.math.BigDecimal"/>
	<field name="qtyentered" class="java.math.BigDecimal"/>
	<field name="uomsymbol" class="java.lang.String"/>
	<field name="name" class="java.lang.String"/>
	<field name="description" class="java.lang.String"/>
	<field name="documentnote" class="java.lang.String"/>
	<field name="sku" class="java.lang.String"/>
	<field name="productvalue" class="java.lang.String"/>
	<field name="resourcedescription" class="java.lang.String"/>
	<field name="pricelist" class="java.math.BigDecimal"/>
	<field name="priceenteredlist" class="java.math.BigDecimal"/>
	<field name="discount" class="java.math.BigDecimal"/>
	<field name="priceactual" class="java.math.BigDecimal"/>
	<field name="priceentered" class="java.math.BigDecimal"/>
	<field name="linenetamt" class="java.math.BigDecimal"/>
	<field name="m_attributesetinstance_id" class="java.math.BigDecimal"/>
	<field name="m_attributeset_id" class="java.math.BigDecimal"/>
	<field name="productdescription" class="java.lang.String"/>
	<field name="imageurl" class="java.lang.String"/>
	<field name="c_campaign_id" class="java.math.BigDecimal"/>
	<field name="c_project_id" class="java.math.BigDecimal"/>
	<field name="c_activity_id" class="java.math.BigDecimal"/>
	<field name="c_projectphase_id" class="java.math.BigDecimal"/>
	<field name="c_projecttask_id" class="java.math.BigDecimal"/>
	<field name="iso_code" class="java.lang.String"/>
	<field name="taxrate" class="java.math.BigDecimal"/>
	<field name="c_currency_id" class="java.math.BigDecimal"/>
	<field name="empf_price" class="java.math.BigDecimal"/>
	<field name="m_inout_id" class="java.math.BigDecimal"/>
	<field name="inout_docno" class="java.lang.String"/>
	<field name="inout_date" class="java.sql.Timestamp"/>
	<field name="order_docno" class="java.lang.String"/>
	<field name="order_poreference" class="java.lang.String"/>
	<field name="order_dateordered" class="java.sql.Timestamp"/>
	<field name="bp_addressblock" class="java.lang.String"/>
	<field name="source" class="java.lang.String"/>
	<variable name="LINESUM_SUM" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{linenetamt}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="currency" class="java.lang.String">
		<variableExpression><![CDATA[$F{iso_code}]]></variableExpression>
		<initialValueExpression><![CDATA[$F{iso_code}]]></initialValueExpression>
	</variable>
	<group name="m_inout_id">
		<groupExpression><![CDATA[$F{m_inout_id}]]></groupExpression>
		<groupHeader>
			<band height="30" splitType="Stretch">
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField-62" mode="Transparent" x="22" y="12" width="465" height="11" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement>
						<font fontName="SansSerif" size="9" isBold="true" pdfFontName="Helvetica"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$R{shipmentno} + " " + $F{inout_docno} + " " +  $R{ofdate} + " " + java.text.DateFormat.getDateInstance().format($F{inout_date}) +
"\n" + $R{deliverto} + " " + $F{bp_addressblock}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band splitType="Stretch"/>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="40" splitType="Stretch">
			<rectangle radius="0">
				<reportElement key="element-22" mode="Opaque" x="1" y="0" width="518" height="20" forecolor="#CCCCCC" backcolor="#999999"/>
				<graphicElement>
					<pen lineWidth="0.5" lineStyle="Solid"/>
				</graphicElement>
			</rectangle>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-13" x="31" y="0" width="34" height="11" forecolor="#FFFFFF"/>
				<box rightPadding="5">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$R{amt}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement key="textField-14" x="66" y="0" width="19" height="11" forecolor="#FFFFFF"/>
				<box rightPadding="5">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$R{uom}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-16" x="85" y="0" width="160" height="11" forecolor="#FFFFFF"/>
				<box rightPadding="5">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$R{product}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-17" x="245" y="0" width="58" height="11" forecolor="#FFFFFF"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$R{price.list}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-18" x="302" y="0" width="42" height="11" forecolor="#FFFFFF"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$R{discount}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-19" x="343" y="0" width="65" height="11" forecolor="#FFFFFF"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$R{price.net}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-20" x="407" y="0" width="70" height="11" forecolor="#FFFFFF"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$R{price.linesum}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-44" x="477" y="0" width="36" height="11" forecolor="#FFFFFF"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$R{taxrate}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-46" x="309" y="25" width="100" height="11" forecolor="#000000">
					<printWhenExpression><![CDATA[( $V{LINESUM_SUM}.intValue() > 0 ? new Boolean(true) : new Boolean(false))]]></printWhenExpression>
				</reportElement>
				<box rightPadding="4">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="8" isItalic="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$R{uebertrag}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="###0.00" isBlankWhenNull="true">
				<reportElement key="textField-47" mode="Opaque" x="408" y="25" width="50" height="11" forecolor="#000000" backcolor="#FFFFFF">
					<printWhenExpression><![CDATA[( $V{LINESUM_SUM}.intValue() > 0 ? new Boolean(true) : new Boolean(false))]]></printWhenExpression>
				</reportElement>
				<box rightPadding="3">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="8" isItalic="true"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{LINESUM_SUM}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement key="textField-48" x="457" y="25" width="21" height="11">
					<printWhenExpression><![CDATA[( $V{LINESUM_SUM}.intValue() > 0 ? new Boolean(true) : new Boolean(false))]]></printWhenExpression>
				</reportElement>
				<box leftPadding="3">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="8" isItalic="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{iso_code}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField-52" x="1" y="0" width="30" height="11" forecolor="#FFFFFF"/>
				<box rightPadding="5">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$R{pos}]]></textFieldExpression>
			</textField>
		</band>
	</columnHeader>
	<detail>
		<band height="11" splitType="Stretch">
			<textField isStretchWithOverflow="true" pattern="###0" isBlankWhenNull="true">
				<reportElement key="textField-24" mode="Opaque" x="31" y="0" width="34" height="11" forecolor="#000000" backcolor="#FFFFFF"/>
				<box rightPadding="3">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="8" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{qtyinvoiced}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement key="textField-25" x="66" y="0" width="19" height="11"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{uomsymbol}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="###0.00" isBlankWhenNull="true">
				<reportElement key="textField-31" mode="Opaque" x="244" y="0" width="40" height="11" forecolor="#000000" backcolor="#FFFFFF"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{priceenteredlist}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="###0" isBlankWhenNull="true">
				<reportElement key="textField-32" mode="Opaque" x="303" y="0" width="30" height="11" forecolor="#000000" backcolor="#FFFFFF"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{discount}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="###0.00" isBlankWhenNull="true">
				<reportElement key="textField-33" mode="Opaque" x="343" y="0" width="46" height="11" forecolor="#000000" backcolor="#FFFFFF"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{priceactual}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="###0.00" isBlankWhenNull="true">
				<reportElement key="textField-34" mode="Opaque" x="408" y="0" width="50" height="11" forecolor="#000000" backcolor="#FFFFFF"/>
				<box rightPadding="3">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{linenetamt}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement key="textField-35" x="457" y="0" width="20" height="11">
					<printWhenExpression><![CDATA[( $F{m_product_id}.intValue() > 0 ? new Boolean(true) : new Boolean(false))]]></printWhenExpression>
				</reportElement>
				<box rightPadding="3">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{iso_code}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement key="textField-45" x="477" y="0" width="25" height="11"/>
				<box rightPadding="3">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{taxrate}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="###0" isBlankWhenNull="true">
				<reportElement key="textField-53" mode="Opaque" x="2" y="0" width="30" height="11" forecolor="#000000" backcolor="#FFFFFF"/>
				<box rightPadding="3">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="8" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[( $F{m_product_id}.intValue() > 0 ? $F{line} : null )]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement key="staticText-1" x="332" y="0" width="12" height="11">
					<printWhenExpression><![CDATA[( $F{discount}.intValue() > 0 ? new Boolean(true) : new Boolean(false))]]></printWhenExpression>
				</reportElement>
				<box leftPadding="3">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[%]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement key="textField-58" x="283" y="0" width="20" height="11">
					<printWhenExpression><![CDATA[( $F{priceenteredlist}.intValue() > 0 ? new Boolean(true) : new Boolean(false))]]></printWhenExpression>
				</reportElement>
				<box leftPadding="3">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{iso_code}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement key="textField-59" x="388" y="0" width="20" height="11">
					<printWhenExpression><![CDATA[( $F{priceactual}.intValue() > 0 ? new Boolean(true) : new Boolean(true))]]></printWhenExpression>
				</reportElement>
				<box leftPadding="3">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{iso_code}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement key="staticText-2" x="501" y="0" width="12" height="11">
					<printWhenExpression><![CDATA[( $F{taxrate}.intValue() > 0 ? new Boolean(true) : new Boolean(false))]]></printWhenExpression>
				</reportElement>
				<box leftPadding="3">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<text><![CDATA[%]]></text>
			</staticText>
			<subreport isUsingCache="true">
				<reportElement key="subreport-3" x="85" y="0" width="177" height="11"/>
				<subreportParameter name="text">
					<subreportParameterExpression><![CDATA[$F{description}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="text2">
					<subreportParameterExpression><![CDATA[new String("'Auftragsnr.: " + ($F{order_poreference}.equals(null) || $F{order_poreference}.equals(" ") ? " -- " : $F{order_poreference}) +
"    Bestellnr.: " + ($F{order_docno} == null ? " -- " : $F{order_docno}))]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="ad_language">
					<subreportParameterExpression><![CDATA[$F{ad_language}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="m_product_id">
					<subreportParameterExpression><![CDATA[$F{m_product_id}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA["de/metas/docs/generics/report_details_line.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</detail>
	<columnFooter>
		<band height="20" splitType="Stretch">
			<textField isBlankWhenNull="false">
				<reportElement key="textField-49" x="308" y="1" width="100" height="11" forecolor="#000000">
					<printWhenExpression><![CDATA[( $V{LINESUM_SUM}.intValue() > 0 ? new Boolean(true) : new Boolean(false))]]></printWhenExpression>
				</reportElement>
				<box rightPadding="4">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="8" isItalic="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$R{zwischensumme}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="###0.00" isBlankWhenNull="true">
				<reportElement key="textField-50" mode="Opaque" x="407" y="1" width="50" height="11" forecolor="#000000" backcolor="#FFFFFF">
					<printWhenExpression><![CDATA[( $V{LINESUM_SUM}.intValue() > 0 ? new Boolean(true) : new Boolean(false))]]></printWhenExpression>
				</reportElement>
				<box rightPadding="3">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font fontName="SansSerif" size="8" isItalic="true"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{LINESUM_SUM}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement key="textField-51" x="456" y="1" width="21" height="11">
					<printWhenExpression><![CDATA[( $V{LINESUM_SUM}.intValue() > 0 ? new Boolean(true) : new Boolean(false))]]></printWhenExpression>
				</reportElement>
				<box leftPadding="3">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="8" isItalic="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{iso_code}]]></textFieldExpression>
			</textField>
		</band>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<lastPageFooter>
		<band height="55" splitType="Stretch">
			<subreport isUsingCache="true">
				<reportElement key="subreport-1" x="246" y="6" width="234" height="49"/>
				<subreportParameter name="kind">
					<subreportParameterExpression><![CDATA[new String("SUM")]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="ad_language">
					<subreportParameterExpression><![CDATA[$P{ad_language}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="c_invoice_id">
					<subreportParameterExpression><![CDATA[$P{c_invoice_id}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA["de/metas/docs/purchase/invoice/report_details_sum.jasper"]]></subreportExpression>
			</subreport>
			<subreport isUsingCache="true">
				<reportElement key="subreport-2" x="11" y="6" width="234" height="49"/>
				<subreportParameter name="kind">
					<subreportParameterExpression><![CDATA[new String("TX")]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="ad_language">
					<subreportParameterExpression><![CDATA[$P{ad_language}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="c_invoice_id">
					<subreportParameterExpression><![CDATA[$P{c_invoice_id}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA["de/metas/docs/purchase/invoice/report_details_sum.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</lastPageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>

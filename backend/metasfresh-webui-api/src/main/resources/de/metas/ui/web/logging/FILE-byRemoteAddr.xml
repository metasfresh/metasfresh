<?xml version="1.0" encoding="UTF-8"?>

<included>
	<appender name="FILE-byRemoteAddr" class="ch.qos.logback.classic.sift.SiftingAppender">
		<!-- in the absence of the class attribute, it is assumed that the desired 
			discriminator type is ch.qos.logback.classic.sift.MDCBasedDiscriminator -->
		<discriminator>
			<key>RemoteAddr</key>
			<defaultValue>server</defaultValue>
		</discriminator>
		<sift>
			<appender name="FILE-byRemoteAddr-${RemoteAddr}" class="ch.qos.logback.core.rolling.RollingFileAppender">
				<encoder>
					<pattern>${FILE_LOG_PATTERN}</pattern>
				</encoder>

				<!-- it works with changing the logging.path property -->
				<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
					<LogDir>${LOG_PATH}/byRemoteAddr/${RemoteAddr}</LogDir>
                    <FileNamePattern>metasfresh-%d{yyyy-MM-dd}.log</FileNamePattern>

					<TimeBasedFileNamingAndTriggeringPolicy
						class="ch.qos.logback.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy" />
				</rollingPolicy>
			</appender>
		</sift>
	</appender>
</included>

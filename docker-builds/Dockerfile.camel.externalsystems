ARG REFNAME=local
ARG REGISTRY=
FROM ${REGISTRY}metasfresh/metas-mvn-camel:$REFNAME AS camel

FROM eclipse-temurin:21-jdk

RUN apt-get -y update && apt-get -y install curl

WORKDIR /app

COPY --from=camel /camel/de-metas-camel-externalsystems/core/target/uber/de-metas-camel-externalsystems-core.jar .

CMD ["java", "-cp", "/app/de-metas-camel-externalsystems-core.jar", "-Dloader.path=/app/libs", "org.springframework.boot.loader.PropertiesLauncher"]